{"ast":null,"code":"import { makeAutoObservable, runInAction } from \"mobx\";\nimport api from \"../services/API\";\nexport class Store {\n  constructor() {\n    this.movies = [];\n    this.loading = false;\n\n    this.fetchMovies = async search => {\n      if (this.loading) {\n        return;\n      }\n\n      this.loading = true;\n\n      try {\n        const movies = await api.getMovies(search);\n        this.setMovies(movies);\n        runInAction(() => {\n          this.movies = movies;\n        });\n      } catch (e) {\n        console.error(e);\n      } finally {\n        runInAction(() => {\n          this.loading = false;\n        });\n      }\n    };\n\n    makeAutoObservable(this);\n  }\n\n  setMovies(movies) {\n    this.movies = movies;\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n}","map":{"version":3,"sources":["/home/manoel/Codigos/treinamento/aulas/05/reactmovies/src/Home/store.ts"],"names":["makeAutoObservable","runInAction","api","Store","constructor","movies","loading","fetchMovies","search","getMovies","setMovies","e","console","error","setLoading"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,WAA7B,QAAgD,MAAhD;AAEA,OAAOC,GAAP,MAAgB,iBAAhB;AAEA,OAAO,MAAMC,KAAN,CAAa;AAChBC,EAAAA,WAAW,GAAE;AAAA,SAGNC,MAHM,GAGkB,EAHlB;AAAA,SAINC,OAJM,GAIa,KAJb;;AAAA,SAWNC,WAXM,GAWQ,MAAOC,MAAP,IAA0B;AAC3C,UAAI,KAAKF,OAAT,EAAiB;AACb;AACH;;AACD,WAAKA,OAAL,GAAe,IAAf;;AACA,UAAG;AACC,cAAMD,MAAM,GAAI,MAAMH,GAAG,CAACO,SAAJ,CAAcD,MAAd,CAAtB;AACA,aAAKE,SAAL,CAAeL,MAAf;AACAJ,QAAAA,WAAW,CAAE,MAAM;AACf,eAAKI,MAAL,GAAeA,MAAf;AACH,SAFU,CAAX;AAGH,OAND,CAME,OAAMM,CAAN,EAAS;AACPC,QAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH,OARD,SAQU;AACNV,QAAAA,WAAW,CAAC,MAAM;AACd,eAAKK,OAAL,GAAe,KAAf;AACH,SAFU,CAAX;AAIH;AACJ,KA9BY;;AACTN,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;;AAGMU,EAAAA,SAAS,CAACL,MAAD,EAAuB;AACnC,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACMS,EAAAA,UAAU,CAACR,OAAD,EAAkB;AAC/B,SAAKA,OAAL,GAAeA,OAAf;AACH;;AAXe","sourcesContent":["import { makeAutoObservable, runInAction } from \"mobx\";\nimport * as types from '../declarations/types';\nimport api from \"../services/API\";\n\nexport class Store  {\n    constructor(){\n        makeAutoObservable(this);\n    }\n    public movies: types.Movie[] = [];\n    public loading: boolean = false;\n    public setMovies(movies: types.Movie[]){\n        this.movies = movies;\n    }\n    public setLoading(loading: boolean){\n        this.loading = loading;\n    }\n    public fetchMovies = async (search: string) => {\n        if( this.loading){\n            return;\n        }\n        this.loading = true;\n        try{\n            const movies  = await api.getMovies(search);\n            this.setMovies(movies)\n            runInAction( () => {\n                this.movies =  movies;\n            })\n        } catch(e) {\n            console.error(e);\n        } finally {\n            runInAction(() => {\n                this.loading = false;\n            })\n\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}